# Test task GREEN API
**Description:**  
This file is a part of a test task.

**Author:**  
Maria - devmria@gmail.com

# README для разработчиков и системных администраторов

## Описание

Данное приложение представляет собой веб-страницу для взаимодействия с API, предназначенным для работы с WhatsApp через GREEN API. Страница позволяет выполнять несколько операций с использованием API, таких как получение настроек инстанса, получение состояния инстанса, отправка сообщения и отправка файла по URL.

## Логика работы программы

Программа предоставляет интерфейс для выполнения запросов к API с помощью HTTP-методов (GET, POST). Каждый метод API выполняется по нажатию кнопок, и результат (успех или ошибка) отображается на странице в поле "Ответ".

### Основные методы:

1. **getSettings** – получает настройки инстанса.
2. **getStateInstance** – получает текущее состояние инстанса.
3. **sendMessage** – отправляет сообщение на указанный `chatId`.
4. **sendFileByUrl** – отправляет файл по URL на указанный `chatId`.

## Структура приложения

Приложение состоит из двух основных частей:
1. **Frontend** — HTML, CSS и JavaScript.
2. **API** — методы, реализующие взаимодействие с API GREEN API, используя `fetch`.

### HTML-страница

HTML-страница (`index.html`) содержит формы для ввода данных и кнопки для выполнения запросов к API. 
Структура страницы следующая:
- **Поля ввода**: для ввода `idInstance`, `apiTokenInstance`, `chatId`, `message`, `urlFile`, `fileName`, которые требуются для работы с API.
- **Кнопки**: каждая кнопка привязана к методу API.
- **Текстовое поле**: текстовое поле для отображения ответов.

### CSS

В файле `styles.css` описаны базовые стили для страницы:
- Стили для контейнеров и форм.
- Стили для кнопок и текстовых полей.
- Используется `flexbox` для гибкой верстки элементов.

### JavaScript

Основной функционал приложения реализован в файле `script.js`. 
В этом файле находятся функции для выполнения запросов к API и обработчики событий для кнопок.
Ответы и ошибки API отображаются в текстовом поле на странице (`response_field`) а также в консоли разработчика.

## Основные функции

### Общий алгоритм работы:

1. Пользователь вводит необходимые данные (`idInstance`, `apiTokenInstance`, `chatId`, `message`, `urlFile`, `fileName`) в форму на странице.
2. При нажатии на соответствующую кнопку метода отправляется запрос к API.
3. Перед отправкой запроса проверяется, что все обязательные поля заполнены. Если какое-либо поле не заполнено, пользователю выводится уведомление (alert) о необходимости заполнить все поля.
4. Ответ от API отображается в текстовом поле `response_field` на странице. 
5. Результат выполнения запроса отображается в текстовом поле `response_field`, а также в чате WhatsApp (если запрос был успешным).


### 1. **getSettings(idInstance, apiTokenInstance)**

Метод отправляет GET-запрос на API для получения настроек инстанса.

```javascript
const url = `${apiUrl}/waInstance${idInstance}/getSettings/${apiTokenInstance}`;
```

### 2. **getStateInstance(idInstance, apiTokenInstance)**

Метод отправляет GET-запрос на API для получения настроек инстанса.

```javascript
const url = `${apiUrl}/waInstance${idInstance}/getStateInstance/${apiTokenInstance}`;
```

### 3. **sendMessage(idInstance, apiTokenInstance, headers, payload)**

Метод отправляет POST-запрос на API для отправки сообщения на указанный chatId.

```javascript
const url = `${apiUrl}/waInstance${idInstance}/sendMessage/${apiTokenInstance}`;
```

### 4. **sendFileByUrl(idInstance, apiTokenInstance, headers, payload)**

Метод отправляет POST-запрос на API для отправки файла по URL на указанный chatId.

```javascript
const url = `${apiUrl}/waInstance${idInstance}/sendFileByUrl/${apiTokenInstance}`;
```

## Необходимое окружение для запуска

- **Web-браузер**: поддерживающий JavaScript и работу с `fetch`.
- **Интернет-соединение**: для взаимодействия с API, которое доступно через интернет.

## Как запустить

1. Скачайте или клонируйте репозиторий.
2. Откройте файл `index.html` в браузере.
3. Введите данные для подключения к API (`idInstance` и `apiTokenInstance`).
- **`idInstance`** и **`apiTokenInstance`** можно получить, зарегистрировавшись в [личном кабинете GREEN API](https://green-api.com). После регистрации и создания инстанса вам будет предоставлен `idInstance` и `apiTokenInstance`, которые необходимо ввести в соответствующие поля.
4. Используйте кнопки для отправки запросов:
   - `getSettings`
   - `getStateInstance`
   - `sendMessage`
   - `sendFileByUrl`

## Примечания

- Убедитесь, что у вас есть доступ к соответствующим сервисам (например, WhatsApp) для отправки сообщений и файлов.
